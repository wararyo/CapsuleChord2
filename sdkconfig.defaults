# Bluetooth configuration for NimBLE
CONFIG_BT_ENABLED=y
CONFIG_BT_NIMBLE_ENABLED=y
CONFIG_BT_CONTROLLER_ENABLED=y

# NimBLE role configuration
CONFIG_BT_NIMBLE_ROLE_PERIPHERAL=y
CONFIG_BT_NIMBLE_ROLE_BROADCASTER=y
CONFIG_BT_NIMBLE_ROLE_CENTRAL=n
CONFIG_BT_NIMBLE_ROLE_OBSERVER=n

# NimBLE settings
CONFIG_BT_NIMBLE_MAX_CONNECTIONS=1
CONFIG_BT_NIMBLE_MAX_BONDS=3
CONFIG_BT_NIMBLE_MAX_CCCDS=8
CONFIG_BT_NIMBLE_L2CAP_COC_MAX_NUM=0
CONFIG_BT_NIMBLE_PINNED_TO_CORE=0
CONFIG_BT_NIMBLE_HOST_TASK_STACK_SIZE=4096

# Security Manager (for bonding)
CONFIG_BT_NIMBLE_SM_LEGACY=y
CONFIG_BT_NIMBLE_SM_SC=y

# GAP device name
CONFIG_BT_NIMBLE_GAP_DEVICE_NAME_MAX_LEN=31

# Enable GATT
CONFIG_BT_NIMBLE_GATT_MAX_PROCS=4

# Debug logs (optional, can be disabled for release)
CONFIG_BT_NIMBLE_DEBUG=n

# Disable unused Bluedroid stack to save memory
CONFIG_BT_BLUEDROID_ENABLED=n

# Enable PSRAM
CONFIG_SPIRAM=y

# FreeRTOS Tick
CONFIG_FREERTOS_HZ=1000

# Disable external memory for stack
CONFIG_FREERTOS_TASK_CREATE_ALLOW_EXT_MEM=n

# TinyUSB configuration for USB MIDI + CDC composite device
CONFIG_TINYUSB=y
CONFIG_TINYUSB_CDC_ENABLED=y
CONFIG_TINYUSB_CDC_COUNT=1
CONFIG_TINYUSB_MIDI_COUNT=1

# Disable USB Serial/JTAG (conflicts with USB-OTG)
# CONFIG_ESP_CONSOLE_SECONDARY_USB_SERIAL_JTAG is not set

# Use UART for console (ESP_LOG will output to UART, not USB CDC)
CONFIG_ESP_CONSOLE_UART_DEFAULT=y
